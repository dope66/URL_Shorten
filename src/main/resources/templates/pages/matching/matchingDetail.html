<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <title>매칭 상세 정보</title>
    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/css/bootstrap.css" rel="stylesheet"/>
    <script src="/js/bootstrap.js"></script>


</head>

<script th:inline="javascript">
    var timer;
    var redirectToArticle;
    var count;

    // 5초 후에 자동으로 URL을 변경하는 함수
    function redirectToArticle() {
        count = 10;
        var countElement = document.getElementById('countdown');  // 카운트 다운

        // 카운트 다운 표시 및 URL 자동 변경
        function showCountdown() {
            countElement.innerHTML = count + "";
            if (count === 0) {
                window.location.href = /*[[${articleUrl}]]*/ "";  // scrapId에 해당하는 articleUrl로 이동
            } else {
                count--;
                timer = setTimeout(showCountdown, 1000);  // 1초마다 showCountdown 함수 호출
            }
        }

        timer = setTimeout(showCountdown, 1000);  // 초기 1초 대기 후에 showCountdown 함수 호출
    }

    // 페이지가 로드되면 자동으로 redirectToArticle 함수 호출
    window.onload = redirectToArticle;

    // 리다이렉트 정지
    function stopRedirect() {
        clearTimeout(timer);  // 타이머 취소
        count = Math.max(count, 0);  // 음수로 카운트가 되지 않도록 보정
        document.getElementById('countdown').innerHTML = count + "";  // 현재 카운트 표시
        // document.getElementById('hidden-btn').style.display = 'none';  // hidden-btn 감추기
        document.getElementById('redirect-articleUrl').style.display = 'inline';  // redirect-articleUrl 보이기

    }
    // articleUrl로 이동
    function redirectToArticleUrl() {
        window.location.href = /*[[${articleUrl}]]*/ "";
    }
</script>
<script>
    $(function () {
        $('#hidden-btn').click(function () {
            stopRedirect();
        });

        $('#redirect-articleUrl').click(function () {
            redirectToArticleUrl();
        });
    });

</script>
<link href="/css/loading.css" rel="stylesheet">

<body>
<div class="modal modal-tour position-static d-block bg-info py-5" id="modalTour" role="dialog" tabindex="-1">
    <div class="modal-dialog" role="document">
        <div class="modal-content rounded-4 shadow">
            <div class="modal-body p-5">
                <h2 class="fw-bold mb-0">나와의 궁합은?</h2>
                <ul class="d-grid gap-4 my-5 list-unstyled">
                    <li class="card card-body d-flex gap-4">
                        <div class="row">

                            <svg class="bi bi-universal-access text-muted flex-shrink-0" fill="currentColor" height="48"
                                 viewBox="0 0 16 16"
                                 width="48" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM6 5.5l-4.535-.442A.531.531 0 0 1 1.531 4H14.47a.531.531 0 0 1 .066 1.058L10 5.5V9l.452 6.42a.535.535 0 0 1-1.053.174L8.243 9.97c-.064-.252-.422-.252-.486 0l-1.156 5.624a.535.535 0 0 1-1.053-.174L6 9V5.5Z"/>
                            </svg>
                            <h5 class="mb-0">회원 정보</h5>
                        </div>
                        <div>
                            <hr>
                            <p>이름: <span th:text="${user.username}"></span></p>
                            <p>경력: <span th:text="${user.experience}"></span></p>
                            <p>스킬 스택: <span th:text="${user.skillStack}"></span></p>
                        </div>
                    </li>
                    <li class="card card-body d-flex gap-4">
                        <div class="row">
                            <svg class="bi bi-building-gear text-warning flex-shrink-0" fill="currentColor" height="48"
                                 viewBox="0 0 16 16"
                                 width="48" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1V1Z"/>
                                <path d="M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm4.386 1.46c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"/>
                            </svg>
                            <h5 class="mb-0">공고 정보</h5>
                        </div>
                        <div>

                            <hr>
                            <p>제목: <span th:text="${scrap.articleText}"></span></p>
                            <p>스킬 스택: <span th:text="${scrap.skillStack}"></span></p>
                            <p>경력 : <span th:text="${scrap.experience}"></span></p>

                        </div>
                    </li>
                    <li class="card card-body d-flex gap-4">
                        <div class="row">


                            <svg class="bi bi-search-heart text-primary flex-shrink-0" fill="currentColor" height="48"
                                 viewBox="0 0 16 16"
                                 width="48" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.5 4.482c1.664-1.673 5.825 1.254 0 5.018-5.825-3.764-1.664-6.69 0-5.018Z"/>
                                <path d="M13 6.5a6.471 6.471 0 0 1-1.258 3.844c.04.03.078.062.115.098l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1.007 1.007 0 0 1-.1-.115h.002A6.5 6.5 0 1 1 13 6.5ZM6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z"/>
                            </svg>
                            <h5 class="mb-0">매칭 점수</h5>
                        </div>
                        <div>

                            <p><span th:text="${matchingGrade}"></span></p>

                        </div>

                    </li>
                    <hr>
                </ul>
                <div class="progress2 progress-moved">
                    <div class="progress-bar2">
                    </div>

                </div>
                <h5 class="text-center">이동까지 남은 시간: <span id="countdown"></span>초</h5>
                <button id="hidden-btn" onclick="stopRedirect()">정지</button>
                    <button id="redirect-articleUrl" onclick="redirectToArticleUrl()" style="display: none">공고로 이동</button>
            </div>
        </div>
    </div>
</div>


<script src="/js/scripts.js"></script>

</body>
</html>
